{"ast":null,"code":"import { Controls, MathUtils, MOUSE, Quaternion, Vector2, Vector3 } from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event TrackballControls#change\n * @type {Object}\n */\nconst _changeEvent = {\n  type: 'change'\n};\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event TrackballControls#start\n * @type {Object}\n */\nconst _startEvent = {\n  type: 'start'\n};\n\n/**\n * Fires when an interaction has finished.\n *\n * @event TrackballControls#end\n * @type {Object}\n */\nconst _endEvent = {\n  type: 'end'\n};\nconst _EPS = 0.000001;\nconst _STATE = {\n  NONE: -1,\n  ROTATE: 0,\n  ZOOM: 1,\n  PAN: 2,\n  TOUCH_ROTATE: 3,\n  TOUCH_ZOOM_PAN: 4\n};\nconst _v2 = new Vector2();\nconst _mouseChange = new Vector2();\nconst _objectUp = new Vector3();\nconst _pan = new Vector3();\nconst _axis = new Vector3();\nconst _quaternion = new Quaternion();\nconst _eyeDirection = new Vector3();\nconst _objectUpDirection = new Vector3();\nconst _objectSidewaysDirection = new Vector3();\nconst _moveDirection = new Vector3();\n\n/**\n * This class is similar to {@link OrbitControls}. However, it does not maintain a constant camera\n * `up` vector. That means if the camera orbits over the “north” and “south” poles, it does not flip\n * to stay \"right side up\".\n *\n * @augments Controls\n * @three_import import { TrackballControls } from 'three/addons/controls/TrackballControls.js';\n */\nclass TrackballControls extends Controls {\n  /**\n   * Constructs a new controls instance.\n   *\n   * @param {Object3D} object - The object that is managed by the controls.\n   * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n   */\n  constructor(object) {\n    let domElement = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    super(object, domElement);\n\n    /**\n     * Represents the properties of the screen. Automatically set when `handleResize()` is called.\n     *\n     * @type {Object}\n     * @readonly\n     */\n    this.screen = {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    };\n\n    /**\n     * The rotation speed.\n     *\n     * @type {number}\n     * @default 1\n     */\n    this.rotateSpeed = 1.0;\n\n    /**\n     * The zoom speed.\n     *\n     * @type {number}\n     * @default 1.2\n     */\n    this.zoomSpeed = 1.2;\n\n    /**\n     * The pan speed.\n     *\n     * @type {number}\n     * @default 0.3\n     */\n    this.panSpeed = 0.3;\n\n    /**\n     * Whether rotation is disabled or not.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    this.noRotate = false;\n\n    /**\n     * Whether zooming is disabled or not.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    this.noZoom = false;\n\n    /**\n     * Whether panning is disabled or not.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    this.noPan = false;\n\n    /**\n     * Whether damping is disabled or not.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    this.staticMoving = false;\n\n    /**\n     * Defines the intensity of damping. Only considered if `staticMoving` is set to `false`.\n     *\n     * @type {number}\n     * @default 0.2\n     */\n    this.dynamicDampingFactor = 0.2;\n\n    /**\n     * How far you can dolly in (perspective camera only).\n     *\n     * @type {number}\n     * @default 0\n     */\n    this.minDistance = 0;\n\n    /**\n     * How far you can dolly out (perspective camera only).\n     *\n     * @type {number}\n     * @default Infinity\n     */\n    this.maxDistance = Infinity;\n\n    /**\n     * How far you can zoom in (orthographic camera only).\n     *\n     * @type {number}\n     * @default 0\n     */\n    this.minZoom = 0;\n\n    /**\n     * How far you can zoom out (orthographic camera only).\n     *\n     * @type {number}\n     * @default Infinity\n     */\n    this.maxZoom = Infinity;\n\n    /**\n     * This array holds keycodes for controlling interactions.\n     *\n     * - When the first defined key is pressed, all mouse interactions (left, middle, right) performs orbiting.\n     * - When the second defined key is pressed, all mouse interactions (left, middle, right) performs zooming.\n     * - When the third defined key is pressed, all mouse interactions (left, middle, right) performs panning.\n     *\n     * Default is *KeyA, KeyS, KeyD* which represents A, S, D.\n     *\n     * @type {Array<string>}\n     */\n    this.keys = ['KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/];\n\n    /**\n     * This object contains references to the mouse actions used by the controls.\n     *\n     * ```js\n     * controls.mouseButtons = {\n     * \tLEFT: THREE.MOUSE.ROTATE,\n     * \tMIDDLE: THREE.MOUSE.DOLLY,\n     * \tRIGHT: THREE.MOUSE.PAN\n     * }\n     * ```\n     * @type {Object}\n     */\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    };\n\n    /**\n     * The focus point of the controls.\n     *\n     * @type {Vector3}\n     */\n    this.target = new Vector3();\n\n    // internals\n\n    this.state = _STATE.NONE;\n    this.keyState = _STATE.NONE;\n    this._lastPosition = new Vector3();\n    this._lastZoom = 1;\n    this._touchZoomDistanceStart = 0;\n    this._touchZoomDistanceEnd = 0;\n    this._lastAngle = 0;\n    this._eye = new Vector3();\n    this._movePrev = new Vector2();\n    this._moveCurr = new Vector2();\n    this._lastAxis = new Vector3();\n    this._zoomStart = new Vector2();\n    this._zoomEnd = new Vector2();\n    this._panStart = new Vector2();\n    this._panEnd = new Vector2();\n    this._pointers = [];\n    this._pointerPositions = {};\n\n    // event listeners\n\n    this._onPointerMove = onPointerMove.bind(this);\n    this._onPointerDown = onPointerDown.bind(this);\n    this._onPointerUp = onPointerUp.bind(this);\n    this._onPointerCancel = onPointerCancel.bind(this);\n    this._onContextMenu = onContextMenu.bind(this);\n    this._onMouseWheel = onMouseWheel.bind(this);\n    this._onKeyDown = onKeyDown.bind(this);\n    this._onKeyUp = onKeyUp.bind(this);\n    this._onTouchStart = onTouchStart.bind(this);\n    this._onTouchMove = onTouchMove.bind(this);\n    this._onTouchEnd = onTouchEnd.bind(this);\n    this._onMouseDown = onMouseDown.bind(this);\n    this._onMouseMove = onMouseMove.bind(this);\n    this._onMouseUp = onMouseUp.bind(this);\n\n    // for reset\n\n    this._target0 = this.target.clone();\n    this._position0 = this.object.position.clone();\n    this._up0 = this.object.up.clone();\n    this._zoom0 = this.object.zoom;\n    if (domElement !== null) {\n      this.connect(domElement);\n      this.handleResize();\n    }\n\n    // force an update at start\n    this.update();\n  }\n  connect(element) {\n    super.connect(element);\n    window.addEventListener('keydown', this._onKeyDown);\n    window.addEventListener('keyup', this._onKeyUp);\n    this.domElement.addEventListener('pointerdown', this._onPointerDown);\n    this.domElement.addEventListener('pointercancel', this._onPointerCancel);\n    this.domElement.addEventListener('wheel', this._onMouseWheel, {\n      passive: false\n    });\n    this.domElement.addEventListener('contextmenu', this._onContextMenu);\n    this.domElement.style.touchAction = 'none'; // disable touch scroll\n  }\n  disconnect() {\n    window.removeEventListener('keydown', this._onKeyDown);\n    window.removeEventListener('keyup', this._onKeyUp);\n    this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n    this.domElement.removeEventListener('pointermove', this._onPointerMove);\n    this.domElement.removeEventListener('pointerup', this._onPointerUp);\n    this.domElement.removeEventListener('pointercancel', this._onPointerCancel);\n    this.domElement.removeEventListener('wheel', this._onMouseWheel);\n    this.domElement.removeEventListener('contextmenu', this._onContextMenu);\n    this.domElement.style.touchAction = 'auto'; // disable touch scroll\n  }\n  dispose() {\n    this.disconnect();\n  }\n\n  /**\n   * Must be called if the application window is resized.\n   */\n  handleResize() {\n    const box = this.domElement.getBoundingClientRect();\n    // adjustments come from similar code in the jquery offset() function\n    const d = this.domElement.ownerDocument.documentElement;\n    this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n    this.screen.top = box.top + window.pageYOffset - d.clientTop;\n    this.screen.width = box.width;\n    this.screen.height = box.height;\n  }\n  update() {\n    this._eye.subVectors(this.object.position, this.target);\n    if (!this.noRotate) {\n      this._rotateCamera();\n    }\n    if (!this.noZoom) {\n      this._zoomCamera();\n    }\n    if (!this.noPan) {\n      this._panCamera();\n    }\n    this.object.position.addVectors(this.target, this._eye);\n    if (this.object.isPerspectiveCamera) {\n      this._checkDistances();\n      this.object.lookAt(this.target);\n      if (this._lastPosition.distanceToSquared(this.object.position) > _EPS) {\n        this.dispatchEvent(_changeEvent);\n        this._lastPosition.copy(this.object.position);\n      }\n    } else if (this.object.isOrthographicCamera) {\n      this.object.lookAt(this.target);\n      if (this._lastPosition.distanceToSquared(this.object.position) > _EPS || this._lastZoom !== this.object.zoom) {\n        this.dispatchEvent(_changeEvent);\n        this._lastPosition.copy(this.object.position);\n        this._lastZoom = this.object.zoom;\n      }\n    } else {\n      console.warn('THREE.TrackballControls: Unsupported camera type.');\n    }\n  }\n\n  /**\n   * Resets the controls to its initial state.\n   */\n  reset() {\n    this.state = _STATE.NONE;\n    this.keyState = _STATE.NONE;\n    this.target.copy(this._target0);\n    this.object.position.copy(this._position0);\n    this.object.up.copy(this._up0);\n    this.object.zoom = this._zoom0;\n    this.object.updateProjectionMatrix();\n    this._eye.subVectors(this.object.position, this.target);\n    this.object.lookAt(this.target);\n    this.dispatchEvent(_changeEvent);\n    this._lastPosition.copy(this.object.position);\n    this._lastZoom = this.object.zoom;\n  }\n  _panCamera() {\n    _mouseChange.copy(this._panEnd).sub(this._panStart);\n    if (_mouseChange.lengthSq()) {\n      if (this.object.isOrthographicCamera) {\n        const scale_x = (this.object.right - this.object.left) / this.object.zoom / this.domElement.clientWidth;\n        const scale_y = (this.object.top - this.object.bottom) / this.object.zoom / this.domElement.clientWidth;\n        _mouseChange.x *= scale_x;\n        _mouseChange.y *= scale_y;\n      }\n      _mouseChange.multiplyScalar(this._eye.length() * this.panSpeed);\n      _pan.copy(this._eye).cross(this.object.up).setLength(_mouseChange.x);\n      _pan.add(_objectUp.copy(this.object.up).setLength(_mouseChange.y));\n      this.object.position.add(_pan);\n      this.target.add(_pan);\n      if (this.staticMoving) {\n        this._panStart.copy(this._panEnd);\n      } else {\n        this._panStart.add(_mouseChange.subVectors(this._panEnd, this._panStart).multiplyScalar(this.dynamicDampingFactor));\n      }\n    }\n  }\n  _rotateCamera() {\n    _moveDirection.set(this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0);\n    let angle = _moveDirection.length();\n    if (angle) {\n      this._eye.copy(this.object.position).sub(this.target);\n      _eyeDirection.copy(this._eye).normalize();\n      _objectUpDirection.copy(this.object.up).normalize();\n      _objectSidewaysDirection.crossVectors(_objectUpDirection, _eyeDirection).normalize();\n      _objectUpDirection.setLength(this._moveCurr.y - this._movePrev.y);\n      _objectSidewaysDirection.setLength(this._moveCurr.x - this._movePrev.x);\n      _moveDirection.copy(_objectUpDirection.add(_objectSidewaysDirection));\n      _axis.crossVectors(_moveDirection, this._eye).normalize();\n      angle *= this.rotateSpeed;\n      _quaternion.setFromAxisAngle(_axis, angle);\n      this._eye.applyQuaternion(_quaternion);\n      this.object.up.applyQuaternion(_quaternion);\n      this._lastAxis.copy(_axis);\n      this._lastAngle = angle;\n    } else if (!this.staticMoving && this._lastAngle) {\n      this._lastAngle *= Math.sqrt(1.0 - this.dynamicDampingFactor);\n      this._eye.copy(this.object.position).sub(this.target);\n      _quaternion.setFromAxisAngle(this._lastAxis, this._lastAngle);\n      this._eye.applyQuaternion(_quaternion);\n      this.object.up.applyQuaternion(_quaternion);\n    }\n    this._movePrev.copy(this._moveCurr);\n  }\n  _zoomCamera() {\n    let factor;\n    if (this.state === _STATE.TOUCH_ZOOM_PAN) {\n      factor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n      this._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n      if (this.object.isPerspectiveCamera) {\n        this._eye.multiplyScalar(factor);\n      } else if (this.object.isOrthographicCamera) {\n        this.object.zoom = MathUtils.clamp(this.object.zoom / factor, this.minZoom, this.maxZoom);\n        if (this._lastZoom !== this.object.zoom) {\n          this.object.updateProjectionMatrix();\n        }\n      } else {\n        console.warn('THREE.TrackballControls: Unsupported camera type');\n      }\n    } else {\n      factor = 1.0 + (this._zoomEnd.y - this._zoomStart.y) * this.zoomSpeed;\n      if (factor !== 1.0 && factor > 0.0) {\n        if (this.object.isPerspectiveCamera) {\n          this._eye.multiplyScalar(factor);\n        } else if (this.object.isOrthographicCamera) {\n          this.object.zoom = MathUtils.clamp(this.object.zoom / factor, this.minZoom, this.maxZoom);\n          if (this._lastZoom !== this.object.zoom) {\n            this.object.updateProjectionMatrix();\n          }\n        } else {\n          console.warn('THREE.TrackballControls: Unsupported camera type');\n        }\n      }\n      if (this.staticMoving) {\n        this._zoomStart.copy(this._zoomEnd);\n      } else {\n        this._zoomStart.y += (this._zoomEnd.y - this._zoomStart.y) * this.dynamicDampingFactor;\n      }\n    }\n  }\n  _getMouseOnScreen(pageX, pageY) {\n    _v2.set((pageX - this.screen.left) / this.screen.width, (pageY - this.screen.top) / this.screen.height);\n    return _v2;\n  }\n  _getMouseOnCircle(pageX, pageY) {\n    _v2.set((pageX - this.screen.width * 0.5 - this.screen.left) / (this.screen.width * 0.5), (this.screen.height + 2 * (this.screen.top - pageY)) / this.screen.width // screen.width intentional\n    );\n    return _v2;\n  }\n  _addPointer(event) {\n    this._pointers.push(event);\n  }\n  _removePointer(event) {\n    delete this._pointerPositions[event.pointerId];\n    for (let i = 0; i < this._pointers.length; i++) {\n      if (this._pointers[i].pointerId == event.pointerId) {\n        this._pointers.splice(i, 1);\n        return;\n      }\n    }\n  }\n  _trackPointer(event) {\n    let position = this._pointerPositions[event.pointerId];\n    if (position === undefined) {\n      position = new Vector2();\n      this._pointerPositions[event.pointerId] = position;\n    }\n    position.set(event.pageX, event.pageY);\n  }\n  _getSecondPointerPosition(event) {\n    const pointer = event.pointerId === this._pointers[0].pointerId ? this._pointers[1] : this._pointers[0];\n    return this._pointerPositions[pointer.pointerId];\n  }\n  _checkDistances() {\n    if (!this.noZoom || !this.noPan) {\n      if (this._eye.lengthSq() > this.maxDistance * this.maxDistance) {\n        this.object.position.addVectors(this.target, this._eye.setLength(this.maxDistance));\n        this._zoomStart.copy(this._zoomEnd);\n      }\n      if (this._eye.lengthSq() < this.minDistance * this.minDistance) {\n        this.object.position.addVectors(this.target, this._eye.setLength(this.minDistance));\n        this._zoomStart.copy(this._zoomEnd);\n      }\n    }\n  }\n}\nfunction onPointerDown(event) {\n  if (this.enabled === false) return;\n  if (this._pointers.length === 0) {\n    this.domElement.setPointerCapture(event.pointerId);\n    this.domElement.addEventListener('pointermove', this._onPointerMove);\n    this.domElement.addEventListener('pointerup', this._onPointerUp);\n  }\n\n  //\n\n  this._addPointer(event);\n  if (event.pointerType === 'touch') {\n    this._onTouchStart(event);\n  } else {\n    this._onMouseDown(event);\n  }\n}\nfunction onPointerMove(event) {\n  if (this.enabled === false) return;\n  if (event.pointerType === 'touch') {\n    this._onTouchMove(event);\n  } else {\n    this._onMouseMove(event);\n  }\n}\nfunction onPointerUp(event) {\n  if (this.enabled === false) return;\n  if (event.pointerType === 'touch') {\n    this._onTouchEnd(event);\n  } else {\n    this._onMouseUp();\n  }\n\n  //\n\n  this._removePointer(event);\n  if (this._pointers.length === 0) {\n    this.domElement.releasePointerCapture(event.pointerId);\n    this.domElement.removeEventListener('pointermove', this._onPointerMove);\n    this.domElement.removeEventListener('pointerup', this._onPointerUp);\n  }\n}\nfunction onPointerCancel(event) {\n  this._removePointer(event);\n}\nfunction onKeyUp() {\n  if (this.enabled === false) return;\n  this.keyState = _STATE.NONE;\n  window.addEventListener('keydown', this._onKeyDown);\n}\nfunction onKeyDown(event) {\n  if (this.enabled === false) return;\n  window.removeEventListener('keydown', this._onKeyDown);\n  if (this.keyState !== _STATE.NONE) {\n    return;\n  } else if (event.code === this.keys[_STATE.ROTATE] && !this.noRotate) {\n    this.keyState = _STATE.ROTATE;\n  } else if (event.code === this.keys[_STATE.ZOOM] && !this.noZoom) {\n    this.keyState = _STATE.ZOOM;\n  } else if (event.code === this.keys[_STATE.PAN] && !this.noPan) {\n    this.keyState = _STATE.PAN;\n  }\n}\nfunction onMouseDown(event) {\n  let mouseAction;\n  switch (event.button) {\n    case 0:\n      mouseAction = this.mouseButtons.LEFT;\n      break;\n    case 1:\n      mouseAction = this.mouseButtons.MIDDLE;\n      break;\n    case 2:\n      mouseAction = this.mouseButtons.RIGHT;\n      break;\n    default:\n      mouseAction = -1;\n  }\n  switch (mouseAction) {\n    case MOUSE.DOLLY:\n      this.state = _STATE.ZOOM;\n      break;\n    case MOUSE.ROTATE:\n      this.state = _STATE.ROTATE;\n      break;\n    case MOUSE.PAN:\n      this.state = _STATE.PAN;\n      break;\n    default:\n      this.state = _STATE.NONE;\n  }\n  const state = this.keyState !== _STATE.NONE ? this.keyState : this.state;\n  if (state === _STATE.ROTATE && !this.noRotate) {\n    this._moveCurr.copy(this._getMouseOnCircle(event.pageX, event.pageY));\n    this._movePrev.copy(this._moveCurr);\n  } else if (state === _STATE.ZOOM && !this.noZoom) {\n    this._zoomStart.copy(this._getMouseOnScreen(event.pageX, event.pageY));\n    this._zoomEnd.copy(this._zoomStart);\n  } else if (state === _STATE.PAN && !this.noPan) {\n    this._panStart.copy(this._getMouseOnScreen(event.pageX, event.pageY));\n    this._panEnd.copy(this._panStart);\n  }\n  this.dispatchEvent(_startEvent);\n}\nfunction onMouseMove(event) {\n  const state = this.keyState !== _STATE.NONE ? this.keyState : this.state;\n  if (state === _STATE.ROTATE && !this.noRotate) {\n    this._movePrev.copy(this._moveCurr);\n    this._moveCurr.copy(this._getMouseOnCircle(event.pageX, event.pageY));\n  } else if (state === _STATE.ZOOM && !this.noZoom) {\n    this._zoomEnd.copy(this._getMouseOnScreen(event.pageX, event.pageY));\n  } else if (state === _STATE.PAN && !this.noPan) {\n    this._panEnd.copy(this._getMouseOnScreen(event.pageX, event.pageY));\n  }\n}\nfunction onMouseUp() {\n  this.state = _STATE.NONE;\n  this.dispatchEvent(_endEvent);\n}\nfunction onMouseWheel(event) {\n  if (this.enabled === false) return;\n  if (this.noZoom === true) return;\n  event.preventDefault();\n  switch (event.deltaMode) {\n    case 2:\n      // Zoom in pages\n      this._zoomStart.y -= event.deltaY * 0.025;\n      break;\n    case 1:\n      // Zoom in lines\n      this._zoomStart.y -= event.deltaY * 0.01;\n      break;\n    default:\n      // undefined, 0, assume pixels\n      this._zoomStart.y -= event.deltaY * 0.00025;\n      break;\n  }\n  this.dispatchEvent(_startEvent);\n  this.dispatchEvent(_endEvent);\n}\nfunction onContextMenu(event) {\n  if (this.enabled === false) return;\n  event.preventDefault();\n}\nfunction onTouchStart(event) {\n  this._trackPointer(event);\n  switch (this._pointers.length) {\n    case 1:\n      this.state = _STATE.TOUCH_ROTATE;\n      this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX, this._pointers[0].pageY));\n      this._movePrev.copy(this._moveCurr);\n      break;\n    default:\n      // 2 or more\n      this.state = _STATE.TOUCH_ZOOM_PAN;\n      const dx = this._pointers[0].pageX - this._pointers[1].pageX;\n      const dy = this._pointers[0].pageY - this._pointers[1].pageY;\n      this._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n      const x = (this._pointers[0].pageX + this._pointers[1].pageX) / 2;\n      const y = (this._pointers[0].pageY + this._pointers[1].pageY) / 2;\n      this._panStart.copy(this._getMouseOnScreen(x, y));\n      this._panEnd.copy(this._panStart);\n      break;\n  }\n  this.dispatchEvent(_startEvent);\n}\nfunction onTouchMove(event) {\n  this._trackPointer(event);\n  switch (this._pointers.length) {\n    case 1:\n      this._movePrev.copy(this._moveCurr);\n      this._moveCurr.copy(this._getMouseOnCircle(event.pageX, event.pageY));\n      break;\n    default:\n      // 2 or more\n\n      const position = this._getSecondPointerPosition(event);\n      const dx = event.pageX - position.x;\n      const dy = event.pageY - position.y;\n      this._touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n      const x = (event.pageX + position.x) / 2;\n      const y = (event.pageY + position.y) / 2;\n      this._panEnd.copy(this._getMouseOnScreen(x, y));\n      break;\n  }\n}\nfunction onTouchEnd(event) {\n  switch (this._pointers.length) {\n    case 0:\n      this.state = _STATE.NONE;\n      break;\n    case 1:\n      this.state = _STATE.TOUCH_ROTATE;\n      this._moveCurr.copy(this._getMouseOnCircle(event.pageX, event.pageY));\n      this._movePrev.copy(this._moveCurr);\n      break;\n    case 2:\n      this.state = _STATE.TOUCH_ZOOM_PAN;\n      for (let i = 0; i < this._pointers.length; i++) {\n        if (this._pointers[i].pointerId !== event.pointerId) {\n          const position = this._pointerPositions[this._pointers[i].pointerId];\n          this._moveCurr.copy(this._getMouseOnCircle(position.x, position.y));\n          this._movePrev.copy(this._moveCurr);\n          break;\n        }\n      }\n      break;\n  }\n  this.dispatchEvent(_endEvent);\n}\nexport { TrackballControls };","map":{"version":3,"names":["Controls","MathUtils","MOUSE","Quaternion","Vector2","Vector3","_changeEvent","type","_startEvent","_endEvent","_EPS","_STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","_v2","_mouseChange","_objectUp","_pan","_axis","_quaternion","_eyeDirection","_objectUpDirection","_objectSidewaysDirection","_moveDirection","TrackballControls","constructor","object","domElement","arguments","length","undefined","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","minZoom","maxZoom","keys","mouseButtons","LEFT","MIDDLE","DOLLY","RIGHT","target","state","keyState","_lastPosition","_lastZoom","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","_moveCurr","_lastAxis","_zoomStart","_zoomEnd","_panStart","_panEnd","_pointers","_pointerPositions","_onPointerMove","onPointerMove","bind","_onPointerDown","onPointerDown","_onPointerUp","onPointerUp","_onPointerCancel","onPointerCancel","_onContextMenu","onContextMenu","_onMouseWheel","onMouseWheel","_onKeyDown","onKeyDown","_onKeyUp","onKeyUp","_onTouchStart","onTouchStart","_onTouchMove","onTouchMove","_onTouchEnd","onTouchEnd","_onMouseDown","onMouseDown","_onMouseMove","onMouseMove","_onMouseUp","onMouseUp","_target0","clone","_position0","position","_up0","up","_zoom0","zoom","connect","handleResize","update","element","window","addEventListener","passive","style","touchAction","disconnect","removeEventListener","dispose","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","subVectors","_rotateCamera","_zoomCamera","_panCamera","addVectors","isPerspectiveCamera","_checkDistances","lookAt","distanceToSquared","dispatchEvent","copy","isOrthographicCamera","console","warn","reset","updateProjectionMatrix","sub","lengthSq","scale_x","right","clientWidth","scale_y","bottom","x","y","multiplyScalar","cross","setLength","add","set","angle","normalize","crossVectors","setFromAxisAngle","applyQuaternion","Math","sqrt","factor","clamp","_getMouseOnScreen","pageX","pageY","_getMouseOnCircle","_addPointer","event","push","_removePointer","pointerId","i","splice","_trackPointer","_getSecondPointerPosition","pointer","enabled","setPointerCapture","pointerType","releasePointerCapture","code","mouseAction","button","preventDefault","deltaMode","deltaY","dx","dy"],"sources":["/Users/dimitrischatzopoulos/Desktop/dais/node_modules/three/examples/jsm/controls/TrackballControls.js"],"sourcesContent":["import {\n\tControls,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event TrackballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event TrackballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event TrackballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _EPS = 0.000001;\nconst _STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\nconst _v2 = new Vector2();\nconst _mouseChange = new Vector2();\nconst _objectUp = new Vector3();\nconst _pan = new Vector3();\nconst _axis = new Vector3();\nconst _quaternion = new Quaternion();\nconst _eyeDirection = new Vector3();\nconst _objectUpDirection = new Vector3();\nconst _objectSidewaysDirection = new Vector3();\nconst _moveDirection = new Vector3();\n\n/**\n * This class is similar to {@link OrbitControls}. However, it does not maintain a constant camera\n * `up` vector. That means if the camera orbits over the “north” and “south” poles, it does not flip\n * to stay \"right side up\".\n *\n * @augments Controls\n * @three_import import { TrackballControls } from 'three/addons/controls/TrackballControls.js';\n */\nclass TrackballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * Represents the properties of the screen. Automatically set when `handleResize()` is called.\n\t\t *\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\t/**\n\t\t * The rotation speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * The zoom speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.2\n\t\t */\n\t\tthis.zoomSpeed = 1.2;\n\n\t\t/**\n\t\t * The pan speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.3\n\t\t */\n\t\tthis.panSpeed = 0.3;\n\n\t\t/**\n\t\t * Whether rotation is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noRotate = false;\n\n\t\t/**\n\t\t * Whether zooming is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noZoom = false;\n\n\t\t/**\n\t\t * Whether panning is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noPan = false;\n\n\t\t/**\n\t\t * Whether damping is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.staticMoving = false;\n\n\t\t/**\n\t\t * Defines the intensity of damping. Only considered if `staticMoving` is set to `false`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.2\n\t\t */\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * This array holds keycodes for controlling interactions.\n\t\t *\n\t\t * - When the first defined key is pressed, all mouse interactions (left, middle, right) performs orbiting.\n\t\t * - When the second defined key is pressed, all mouse interactions (left, middle, right) performs zooming.\n\t\t * - When the third defined key is pressed, all mouse interactions (left, middle, right) performs panning.\n\t\t *\n\t\t * Default is *KeyA, KeyS, KeyD* which represents A, S, D.\n\t\t *\n\t\t * @type {Array<string>}\n\t\t */\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * The focus point of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t// internals\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastZoom = 1;\n\t\tthis._touchZoomDistanceStart = 0;\n\t\tthis._touchZoomDistanceEnd = 0;\n\t\tthis._lastAngle = 0;\n\n\t\tthis._eye = new Vector3();\n\n\t\tthis._movePrev = new Vector2();\n\t\tthis._moveCurr = new Vector2();\n\n\t\tthis._lastAxis = new Vector3();\n\n\t\tthis._zoomStart = new Vector2();\n\t\tthis._zoomEnd = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\t\tthis._onTouchEnd = onTouchEnd.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onMouseUp = onMouseUp.bind( this );\n\n\t\t// for reset\n\n\t\tthis._target0 = this.target.clone();\n\t\tthis._position0 = this.object.position.clone();\n\t\tthis._up0 = this.object.up.clone();\n\t\tthis._zoom0 = this.object.zoom;\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t\tthis.handleResize();\n\n\t\t}\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'auto'; // disable touch scroll\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Must be called if the application window is resized.\n\t */\n\thandleResize() {\n\n\t\tconst box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tconst d = this.domElement.ownerDocument.documentElement;\n\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t}\n\n\tupdate() {\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tif ( ! this.noRotate ) {\n\n\t\t\tthis._rotateCamera();\n\n\t\t}\n\n\t\tif ( ! this.noZoom ) {\n\n\t\t\tthis._zoomCamera();\n\n\t\t}\n\n\t\tif ( ! this.noPan ) {\n\n\t\t\tthis._panCamera();\n\n\t\t}\n\n\t\tthis.object.position.addVectors( this.target, this._eye );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._checkDistances();\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS || this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\t\tthis._lastZoom = this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets the controls to its initial state.\n\t */\n\treset() {\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.position.copy( this._position0 );\n\t\tthis.object.up.copy( this._up0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis._lastPosition.copy( this.object.position );\n\t\tthis._lastZoom = this.object.zoom;\n\n\t}\n\n\t_panCamera() {\n\n\t\t_mouseChange.copy( this._panEnd ).sub( this._panStart );\n\n\t\tif ( _mouseChange.lengthSq() ) {\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst scale_x = ( this.object.right - this.object.left ) / this.object.zoom / this.domElement.clientWidth;\n\t\t\t\tconst scale_y = ( this.object.top - this.object.bottom ) / this.object.zoom / this.domElement.clientWidth;\n\n\t\t\t\t_mouseChange.x *= scale_x;\n\t\t\t\t_mouseChange.y *= scale_y;\n\n\t\t\t}\n\n\t\t\t_mouseChange.multiplyScalar( this._eye.length() * this.panSpeed );\n\n\t\t\t_pan.copy( this._eye ).cross( this.object.up ).setLength( _mouseChange.x );\n\t\t\t_pan.add( _objectUp.copy( this.object.up ).setLength( _mouseChange.y ) );\n\n\t\t\tthis.object.position.add( _pan );\n\t\t\tthis.target.add( _pan );\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._panStart.copy( this._panEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._panStart.add( _mouseChange.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.dynamicDampingFactor ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_rotateCamera() {\n\n\t\t_moveDirection.set( this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0 );\n\t\tlet angle = _moveDirection.length();\n\n\t\tif ( angle ) {\n\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\n\t\t\t_eyeDirection.copy( this._eye ).normalize();\n\t\t\t_objectUpDirection.copy( this.object.up ).normalize();\n\t\t\t_objectSidewaysDirection.crossVectors( _objectUpDirection, _eyeDirection ).normalize();\n\n\t\t\t_objectUpDirection.setLength( this._moveCurr.y - this._movePrev.y );\n\t\t\t_objectSidewaysDirection.setLength( this._moveCurr.x - this._movePrev.x );\n\n\t\t\t_moveDirection.copy( _objectUpDirection.add( _objectSidewaysDirection ) );\n\n\t\t\t_axis.crossVectors( _moveDirection, this._eye ).normalize();\n\n\t\t\tangle *= this.rotateSpeed;\n\t\t\t_quaternion.setFromAxisAngle( _axis, angle );\n\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t\tthis._lastAxis.copy( _axis );\n\t\t\tthis._lastAngle = angle;\n\n\t\t} else if ( ! this.staticMoving && this._lastAngle ) {\n\n\t\t\tthis._lastAngle *= Math.sqrt( 1.0 - this.dynamicDampingFactor );\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\t\t\t_quaternion.setFromAxisAngle( this._lastAxis, this._lastAngle );\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t}\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t}\n\n\t_zoomCamera() {\n\n\t\tlet factor;\n\n\t\tif ( this.state === _STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n\t\t\tthis._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( this._zoomEnd.y - this._zoomStart.y ) * this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._zoomStart.y += ( this._zoomEnd.y - this._zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_getMouseOnScreen( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( pageX - this.screen.left ) / this.screen.width,\n\t\t\t( pageY - this.screen.top ) / this.screen.height\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_getMouseOnCircle( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( ( pageX - this.screen.width * 0.5 - this.screen.left ) / ( this.screen.width * 0.5 ) ),\n\t\t\t( ( this.screen.height + 2 * ( this.screen.top - pageY ) ) / this.screen.width ) // screen.width intentional\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointer = ( event.pointerId === this._pointers[ 0 ].pointerId ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointer.pointerId ];\n\n\t}\n\n\t_checkDistances() {\n\n\t\tif ( ! this.noZoom || ! this.noPan ) {\n\n\t\t\tif ( this._eye.lengthSq() > this.maxDistance * this.maxDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.maxDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( this._eye.lengthSq() < this.minDistance * this.minDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.minDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchEnd( event );\n\n\t} else {\n\n\t\tthis._onMouseUp();\n\n\t}\n\n\t//\n\n\tthis._removePointer( event );\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n}\n\nfunction onPointerCancel( event ) {\n\n\tthis._removePointer( event );\n\n}\n\nfunction onKeyUp() {\n\n\tif ( this.enabled === false ) return;\n\n\tthis.keyState = _STATE.NONE;\n\n\twindow.addEventListener( 'keydown', this._onKeyDown );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\n\tif ( this.keyState !== _STATE.NONE ) {\n\n\t\treturn;\n\n\t} else if ( event.code === this.keys[ _STATE.ROTATE ] && ! this.noRotate ) {\n\n\t\tthis.keyState = _STATE.ROTATE;\n\n\t} else if ( event.code === this.keys[ _STATE.ZOOM ] && ! this.noZoom ) {\n\n\t\tthis.keyState = _STATE.ZOOM;\n\n\t} else if ( event.code === this.keys[ _STATE.PAN ] && ! this.noPan ) {\n\n\t\tthis.keyState = _STATE.PAN;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\t\t\tthis.state = _STATE.ZOOM;\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\t\t\tthis.state = _STATE.ROTATE;\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\t\t\tthis.state = _STATE.PAN;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._zoomEnd.copy( this._zoomStart );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._panEnd.copy( this._panStart );\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onMouseMove( event ) {\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t}\n\n}\n\nfunction onMouseUp() {\n\n\tthis.state = _STATE.NONE;\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.noZoom === true ) return;\n\n\tevent.preventDefault();\n\n\tswitch ( event.deltaMode ) {\n\n\t\tcase 2:\n\t\t\t// Zoom in pages\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.025;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\t// Zoom in lines\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.01;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\t// undefined, 0, assume pixels\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.00025;\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( this._pointers[ 0 ].pageX, this._pointers[ 0 ].pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\t\t\tconst dx = this._pointers[ 0 ].pageX - this._pointers[ 1 ].pageX;\n\t\t\tconst dy = this._pointers[ 0 ].pageY - this._pointers[ 1 ].pageY;\n\t\t\tthis._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( this._pointers[ 0 ].pageX + this._pointers[ 1 ].pageX ) / 2;\n\t\t\tconst y = ( this._pointers[ 0 ].pageY + this._pointers[ 1 ].pageY ) / 2;\n\t\t\tthis._panStart.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tthis._panEnd.copy( this._panStart );\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\t\t\tthis._touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\tthis._panEnd.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onTouchEnd( event ) {\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\t\t\tthis.state = _STATE.NONE;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\n\t\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\t\tif ( this._pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\tconst position = this._pointerPositions[ this._pointers[ i ].pointerId ];\n\t\t\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nexport { TrackballControls };\n"],"mappings":"AAAA,SACCA,QAAQ,EACRC,SAAS,EACTC,KAAK,EACLC,UAAU,EACVC,OAAO,EACPC,OAAO,QACD,OAAO;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,YAAY,GAAG;EAAEC,IAAI,EAAE;AAAS,CAAC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,WAAW,GAAG;EAAED,IAAI,EAAE;AAAQ,CAAC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA,MAAME,SAAS,GAAG;EAAEF,IAAI,EAAE;AAAM,CAAC;AAEjC,MAAMG,IAAI,GAAG,QAAQ;AACrB,MAAMC,MAAM,GAAG;EAAEC,IAAI,EAAE,CAAE,CAAC;EAAEC,MAAM,EAAE,CAAC;EAAEC,IAAI,EAAE,CAAC;EAAEC,GAAG,EAAE,CAAC;EAAEC,YAAY,EAAE,CAAC;EAAEC,cAAc,EAAE;AAAE,CAAC;AAE5F,MAAMC,GAAG,GAAG,IAAId,OAAO,CAAC,CAAC;AACzB,MAAMe,YAAY,GAAG,IAAIf,OAAO,CAAC,CAAC;AAClC,MAAMgB,SAAS,GAAG,IAAIf,OAAO,CAAC,CAAC;AAC/B,MAAMgB,IAAI,GAAG,IAAIhB,OAAO,CAAC,CAAC;AAC1B,MAAMiB,KAAK,GAAG,IAAIjB,OAAO,CAAC,CAAC;AAC3B,MAAMkB,WAAW,GAAG,IAAIpB,UAAU,CAAC,CAAC;AACpC,MAAMqB,aAAa,GAAG,IAAInB,OAAO,CAAC,CAAC;AACnC,MAAMoB,kBAAkB,GAAG,IAAIpB,OAAO,CAAC,CAAC;AACxC,MAAMqB,wBAAwB,GAAG,IAAIrB,OAAO,CAAC,CAAC;AAC9C,MAAMsB,cAAc,GAAG,IAAItB,OAAO,CAAC,CAAC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMuB,iBAAiB,SAAS5B,QAAQ,CAAC;EAExC;AACD;AACA;AACA;AACA;AACA;EACC6B,WAAWA,CAAEC,MAAM,EAAsB;IAAA,IAApBC,UAAU,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAErC,KAAK,CAAEF,MAAM,EAAEC,UAAW,CAAC;;IAE3B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACI,MAAM,GAAG;MAAEC,IAAI,EAAE,CAAC;MAAEC,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAE,CAAC;;IAEtD;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,GAAG;;IAEtB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,GAAG;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,GAAG;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,KAAK;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,KAAK;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,KAAK;;IAElB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,KAAK;;IAEzB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,oBAAoB,GAAG,GAAG;;IAE/B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,CAAC;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAGC,QAAQ;;IAE3B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,CAAC;;IAEhB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAGF,QAAQ;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACG,IAAI,GAAG,CAAE,MAAM,CAAC,OAAO,MAAM,CAAC,OAAO,MAAM,CAAC,MAAO;;IAExD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG;MAAEC,IAAI,EAAErD,KAAK,CAACW,MAAM;MAAE2C,MAAM,EAAEtD,KAAK,CAAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}